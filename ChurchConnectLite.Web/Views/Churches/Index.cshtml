@model ChurchConnectLite.Core.Entities.Church

@{
    ViewData["Title"] = "Index";
}

<head>
    <!-- Favicons -->
    <link href="~/View/img/church11.png" rel="icon">
    <link href="~/View/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">

    <!-- Bootstrap CSS File -->
    <link href="~/View/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries CSS Files -->
    <link href="~/View/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="~/View/lib/animate/animate.min.css" rel="stylesheet">
    <link href="~/View/lib/ionicons/css/ionicons.min.css" rel="stylesheet">
    <link href="~/View/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="~/View/lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Main Stylesheet File -->
    <link href="~/View/css/style.css" rel="stylesheet">
    <link href="~/View/css/search.css" rel="stylesheet">
</head>

<body>

    <!--==========================
    Header
    ============================-->
    <header id="header" class="fixed-top">
        <div class="container">

            <div class="float-left">
                <a asp-controller="Home" asp-action="Index" class="scrollto"><img src="~/View/img/churchlogo.png" alt=""></a>
            </div>
            <div class="main-nav float-right d-none d-lg-block ml-2">
                <a asp-controller="Churches" style="color: white" asp-action="Dashboard" class="btn btn-primary">Dashboard </a>
            </div>
            <nav class="main-nav float-right d-none d-lg-block">
                <ul>
                    <a href="" style="color: white" class="btn btn-primary">Add Church</a>
                </ul>
            </nav><!-- .main-nav -->
        </div>
    </header><!-- #header -->
    <section id="about">
        <div class="container" style="margin-top:70px;">
            <div class="bootstrap snippets">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <div class="panel rounded shadow border border-top">
                            <div class="panel-body">
                                <div class="inner-all">
                                    <ul class="list-unstyled">
                                        <li class="text-center">
                                            <img src="@Html.DisplayFor(model => model.MainMinisters.PictureUrl)" class="img-circle img-responsive img-bordered-primary" style="width:100%; height:200px;">
                                        </li>
                                        <h6 class="text-capitalize pt-1 text-center text-primary" style="font-weight:bold">Main Minister</h6>
                                        <li class="text-center ml-5 mt-1">
                                            <h4 class="text-capitalize">@Html.DisplayFor(model => model.MainMinisters.Name)</h4>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </div><!-- /.panel -->
                        <div class="mb-2"></div>
                        <div class="panel panel-theme rounded shadow">
                            <div class="panel-heading">
                                <div class="pull-left">
                                    <h4 class="panel-title ml-2 text-primary" style="font-weight:bold">Contact</h4>
                                </div>
                                <div class="pull-right">
                                    <a href="@Html.DisplayFor(model => model.Facebook)" class="btn btn-sm btn-primary"><i class="fa fa-facebook"></i></a>
                                    <a href="@Html.DisplayFor(model => model.Twitter)" class="btn btn-sm btn-primary"><i class="fa fa-twitter"></i></a>
                                    <a href="@Html.DisplayFor(model => model.Instagram)" class="btn btn-sm btn-primary"><i class="fa fa-instagram"></i></a>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <div class="panel-body no-padding rounded">
                                <ul class="list-group no-margin">
                                    <li  class="list-group-item"><i class="fa fa-envelope mr-5 text-primary"></i>@Html.DisplayFor(model => model.Email)</li>
                                    <li  class="list-group-item"><i class="fa fa-globe mr-5 text-primary"></i> @Html.DisplayFor(model => model.Website)</li>
                                    <li  class="list-group-item"><i class="fa fa-phone mr-5 text-primary"></i> @Html.DisplayFor(model => model.Phone1), @Html.DisplayFor(model => model.Phone2) </li>
                                    <div class="text-center">
                                        <h6 class="text-capitalize pt-1 text-primary" style="font-weight:bold">LOCATION <pre> @Model.Address </pre></h6>
                                    </div>
                                </ul>
                            </div>
                        </div>
                        <div class="panel panel-theme rounded shadow">
                            <div class="panel-heading">
                                <div class="pull-left">
                                    <h4 style="font-weight:bold" class="panel-title ml-2 text-primary">Worship Days</h4>
                                </div>
                                <div class="clearfix"></div>
                            </div><!-- /.panel-heading -->
                            <div class="panel-body no-padding rounded">
                                <div class="inner-all block">
                                    <ul></ul>
                                </div>
                            </div><!-- /.panel-body -->
                        </div><!-- /.panel -->
                    </div>
                    <div class="col-md-8">
                        <div class="panel rounded shadow border border-top">
                            <div class="panel-body pl-4">
                                <div class="d-flex align-items-center">
                                    <div class="testimonial-item">
                                        <img src="@Html.DisplayFor(model => model.LogoUrl)" class="img-profile rounded-circle" style="width:250px; height:150px;" alt="">
                                    </div>
                                    <h2 class="font-weight-bold m-0 text-primary">
                                        @Html.DisplayFor(model => model.Name)
                                    </h2>
                                    <address class="m-0 pt-2 pl-0 pl-md-4 font-weight-light text-secondary">
                                        <i class="fa fa-map-marker"></i>
                                        @Html.DisplayFor(model => model.State), @Html.DisplayFor(model => model.Country)
                                    </address>
                                </div>
                                <p class="h5 text-primary mt-2 d-block font-weight-light">
                                    @Html.DisplayFor(model => model.YearFounded)
                                </p>
                                <p class="lead mt-4"><i class="fa fa-user-circle text-primary"></i> About Us: @Html.DisplayFor(model => model.About).</p>
                                <div class="d-flex mt-5" style="margin-left:60%;">
                                    <h6 class="font-weight-bold mr-3 mt-2">Help Us Grow</h6>
                                    <button type="button" data-toggle="modal" data-target="#donations" class="btn btn-primary mb-3">
                                        <i class="fas fa-donate"></i>
                                        DONATE
                                    </button>
                                </div>
                            </div>
                            </div>
                            <section class="mt-4">
                                <ul class="nav nav-tabs" id="myTab" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
                                            Gallery
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
                                            Ministers
                                        </a>
                                    </li>
                                </ul>
                                <div class="tab-content py-4" id="myTabContent">
                                    <div class="tab-pane active py-3 fade show" id="home" role="tabpanel" aria-labelledby="home-tab">
                                        <div class="col-md-12">
                                            <div class="row">
                                                @if (Model.Gallery != null)
                                                {
                                                    @foreach (var item in Model.Gallery)
                                                    {
                                                        <img class="w-100 rounded border col-md-4" style="height:150px;" src="@item.PictureUrl"
                                                             asp-append-version="true" alt="@item.PictureUrl">
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                        <div class="row row-eq-height justify-content-center">
                                            @if (Model.Ministers != null)
                                            {
                                                @foreach (var item in Model.Ministers)
                                                {
                                                    <div class="col-lg-4 mb-4">
                                                        <div class="card wow bounceInUp">
                                                            <img class="card-img-top" src="@item.PictureUrl" style="height:200px; width:220px;" asp-append-version="true" alt="@item.PictureUrl">
                                                            <div class="card-body">
                                                                <h5 class="card-title">@item.Name</h5>
                                                                <p class="card-text">@item.About</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
            </div>
        </div>
    </section>

    <!--==========================
          Footer
        ============================-->
    <footer id="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-4 col-md-6 footer-info">
                        <img src="~/View/img/chur.png" alt="">
                        <p></p>
                    </div>



                    <div class="col-lg-3 col-md-6 footer-contact">
                        <h4>Contact Us</h4>
                        <p>
                            35, Masha Street <br>
                            Surulere, Lagos<br>
                            Nigeria <br>
                            <strong>Phone:</strong> +234 8123 486 864<br>
                            <strong>Email:</strong> info@churchconnect.com<br>
                        </p>

                        <div class="social-links">
                            <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
                            <a href="#" class="facebook"><i class="fa fa-facebook"></i></a>
                            <a href="#" class="instagram"><i class="fa fa-instagram"></i></a>
                            <a href="#" class="google-plus"><i class="fa fa-google-plus"></i></a>
                            <a href="#" class="linkedin"><i class="fa fa-linkedin"></i></a>
                        </div>

                    </div>

                </div>
            </div>
        </div>

        <div class="container">
            <div class="copyright">
                Church Connect &copy; 2019
            </div>
        </div>
    </footer><!-- #footer -->

    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="~/View/lib/jquery/jquery.min.js"></script>
    <script src="~/View/lib/jquery/jquery-migrate.min.js"></script>
    <script src="~/View/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/View/lib/easing/easing.min.js"></script>
    <script src="~/View/lib/mobile-nav/mobile-nav.js"></script>
    <script src="~/View/lib/wow/wow.min.js"></script>
    <script src="~/View/lib/waypoints/waypoints.min.js"></script>
    <script src="~/View/lib/counterup/counterup.min.js"></script>
    <script src="~/View/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="~/View/lib/isotope/isotope.pkgd.min.js"></script>
    <script src="~/View/lib/lightbox/js/lightbox.min.js"></script>
    <!-- Template Main Javascript File -->
    <script src="~/View/js/main.js"></script>

</body>



<!-- Modal -->
<div class="modal fade" id="donations" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <form>
        <script src="https://js.paystack.co/v1/inline.js"></script>
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Please Fill the Form and click Pay</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Email address</label>
                        <input type="email" class="form-control" id="email" placeholder="Enter Email Address" required>
                    </div>

                    <div class="form-group">
                        <label for="exampleFormControlInput1">Amount</label>
                        <input type="number" class="form-control" id="amount" placeholder="Enter Amount" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="payWithPaystack()"> Pay </button>
                </div>
            </div>
        </div>
    </form>
</div>


<script>
    function payWithPaystack() {
        debugger
        var email = $('#email').val();
        var amount = $('#amount').val();


        var handler = PaystackPop.setup({
            key: 'pk_test_2a7df9fd68357dacdaa1749c0db1880781da4575',
            email: email,
            amount: amount,
            currency: "NGN",
            ref: '' + Math.floor((Math.random() * 1000000000) + 1), // generates a pseudo-unique reference. Please replace with a reference you generated. Or remove the line entirely so our API will generate one for you
            metadata: {
                custom_fields: [
                    {
                        display_name: "Mobile Number ",
                        variable_name: "mobile_number",
                        value: ""
                    }
                ]
            },
            callback: function (response) {
                debugger

                //alert('success. transaction ref is ' + response.reference);
                var email = $('#email').val();
                var amount = $('#amount').val();

                var url = window.location.pathname;
                var id = url.substring(url.lastIndexOf('/') + 1);

                var data =
                {
                    "ChurchId": @Model.ID,
                    "Email": email,
                    "Amount": amount,
                    "Message": response.message,
                    "Status": response.status,
                    "TransactionID ": response.transaction,
                    "ReferenceId": response.trxref
                }


                var url = "/Churches/AddPaystack";
                $.ajax({
                    type: "Post",
                    url: url,
                    contentType: "application/json",
                    data: JSON.stringify(data),
                    success: function (result) {
                    }
                })
                location.reload()

            },
            onClose: function () {
                //alert('window closed');
            }
        });
        handler.openIframe();
    }
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
